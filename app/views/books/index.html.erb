<% content_for :for_head do %>
  <%= stylesheet_link_tag '/stylesheets/table.css', media: 'all', 'data-turbolinks-track': 'reload' %>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js"></script>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.0/css/bootstrap.min.css">
<% end %>

<p id="notice"><%= notice %></p>
<div class="container">
<h1>Books</h1>
<table class="table table-curved">
  <thead>
    <tr>
      <th>Title</th>
      <th>Author</th>
      <th>Publisher</th>
      <th>Overview</th>
      <th>Isbn</th>
      <th>Release year</th>
      <th>Avaiable</th>
    </tr>
  </thead>

  <tbody>
    <% @books.each do |book| %>
      <tr>
        <td><%= book.title %></td>
        <td><%= book.author %></td>
        <td><%= book.publisher %></td>
        <td><%= book.overview %></td>
        <td><%= book.isbn %></td>
        <td><%= book.released_at %></td>
        <td><%= isAvaiable(book) %></td>
        <% if isOperator(current_user) or isAdmin(current_user) %>
          <td><%= link_to 'Show', book %></td>
          <td><%= link_to 'Edit', edit_book_path(book) %></td>
        <% end %>
        <% if isAdmin(current_user) %>
          <td><%= link_to 'Destroy', book, method: :delete, data: { confirm: 'Are you sure?' } %></td>
        <% end %>
      </tr>
    <% end %>
    <%= will_paginate @books %>
  </tbody>
</table>
<br>
</div>
